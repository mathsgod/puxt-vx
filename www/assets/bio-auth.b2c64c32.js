import{_ as p,r as a,o as f,d as g,w as n,b as t,a as v,j as b,e as w}from"./index.5775550b.js";const x={data(){return{items:[],on_off:!1}},created(){this.reload(),localStorage.getItem("auth_username")==this.$vx.me.username&&(this.on_off=!0)},methods:{changeActivate(e){e?localStorage.setItem("auth_username",this.$vx.me.username):localStorage.removeItem("auth_username")},async onDelete(e){await this.$confirm(this.$t("Delete this record?"),{type:"warning"}),await this.$vx.post("/User/setting-bio-auth?_entry=removeCredential",{uuid:e.uuid}),await this.reload()},async register(){let e=await this.$vx.authRegister();if(e.error){this.$alert(e.error.message,{type:"error"});return}this.$message("Register success",{type:"success"}),await this.reload(),localStorage.setItem("auth_username",this.$vx.me.username),this.on_off=!0},async reload(){let{data:e}=await this.$vx.get("bio-auth?_entry=getCredential");this.items=e}}},$=w("Register"),C=["onClick"];function y(e,l,k,V,s,i){const c=a("el-switch"),u=a("el-divider"),m=a("el-button"),_=a("vx-icon"),o=a("el-table-column"),d=a("el-table"),h=a("el-card");return f(),g(h,{header:e.$t("Biometric authentication")},{default:n(()=>[t(c,{modelValue:s.on_off,"onUpdate:modelValue":l[0]||(l[0]=r=>s.on_off=r),"active-text":e.$t("Activate biometric authentication on this device"),onChange:i.changeActivate},null,8,["modelValue","active-text","onChange"]),t(u),t(m,{onClick:i.register,icon:"el-icon-plus"},{default:n(()=>[$]),_:1},8,["onClick"]),t(d,{data:s.items,size:"mini"},{default:n(()=>[t(o,{width:"50"},{default:n(r=>[v("a",{onClick:b(I=>i.onDelete(r.row),["prevent"])},[t(_,{name:"trash",width:"14"})],8,C)]),_:1}),t(o,{label:e.$t("Time"),prop:"time",sortable:""},null,8,["label"]),t(o,{label:"IP",prop:"ip"}),t(o,{label:"User agent",prop:"user-agent"})]),_:1},8,["data"])]),_:1},8,["header"])}var B=p(x,[["render",y]]);export{B as default};
